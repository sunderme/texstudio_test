language: cpp

matrix:
  include:
    - env: QT=qt5osx
      os: osx
    - env: QT=qt4
      os: linux
    - env: QT=qt5
      os: linux
    - env: QT=qt5NoPoppler
      os: linux      

dist: trusty
sudo: required

branches:
  only:
  - master

before_install:
  - ${TRAVIS_BUILD_DIR}/travis-ci/get-dependencies.sh

before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"; fi
  - sleep 3 # give xvfb some time to start
  - ${TRAVIS_BUILD_DIR}/travis-ci/configure.sh 

script: 
  - make
  - export QT_QPA_PLATFORM=minimal
  - if [ $QT = qt5 ]; then ./texstudio --auto-tests; fi


